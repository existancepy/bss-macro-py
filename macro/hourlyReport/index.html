<!DOCTYPE html>
<html>
<head>
    <title>Hourly Report</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
</head>
<body style = "font-family: 'Montserrat', sans-serif; 
    background-image: linear-gradient( rgba(0, 0, 0, 0.85) 0%, rgba(0, 0, 0, 0.85) 100%), 
url(https://static.wikia.nocookie.net/08c2e73b-0598-4037-8726-611dc53ba5ce);
    background-attachment: fixed;
    background-size: cover;
    background-repeat: no-repeat;">
    <label style="display: block;color: white; font-size: 1.8vw; width: 100%; text-align: center; font-weight: 700;margin-bottom: 3vw;">Hourly Report</label>
    <main style = "margin-left: 2%; width: 96%; display: flex; padding-bottom: 2vw;">
        <div style="width:70%; display: flex; flex-direction: column;">
            <div style="display: flex;">
                <div style = "background-color: #1F1F1F; width: 60%; border: 50%; border-radius: 10px; box-shadow: 3px 3px 3px 3px rgba(0, 0, 0, 0.3);">
                    <label style="display: block;color: white; font-size: 1.3vw; width: 100%; text-align: center; font-weight: 600; margin-top: 1vw;">Honey/min</label>
                    <canvas id="hmChart" style = "margin-top: 2vw;"></canvas>
                </div>
                <div style = "background-color: #1F1F1F; width: 38%; border: 50%; border-radius: 10px; box-shadow: 3px 3px 3px 3px rgba(0, 0, 0, 0.3); margin-left: auto;">
                    <label style="display: block;color: white; font-size: 1.3vw; width: 100%; text-align: center; font-weight: 600; margin-top: 1vw;">Task Time</label>
                    <div style="color: white; display: flex; flex-direction: column; margin-left: 10%; font-weight: 500; font-size: 1.1vw; margin-top: 3vw;">
                        <div style="display: flex; align-items: center;">
                            <div style="height: 15px; aspect-ratio: 1/1;background-color: #693ADC; margin-right: 0.8vw;"></div>
                            -rejointime
                        </div>  
                        <div style="display: flex; align-items: center; margin-top: 0.5vw;">
                            <div style="height: 15px; aspect-ratio: 1/1;background-color: #937AD2; margin-right: 0.8vw;"></div>
                            -gathertime
                        </div>  
                        <div style="display: flex; align-items: center; margin-top: 0.5vw;">
                            <div style="height: 15px; aspect-ratio: 1/1;background-color: #A29EAB; margin-right: 0.8vw;"></div>
                            -bugruntime
                        </div>
                        <div style="display: flex; align-items: center; margin-top: 0.5vw;">
                            <div style="height: 15px; aspect-ratio: 1/1;background-color: #65686C; margin-right: 0.8vw;"></div>
                            -converttime
                        </div>
                        <div style="display: flex; align-items: center; margin-top: 0.5vw;">
                            <div style="height: 15px; aspect-ratio: 1/1;background-color: #505358; margin-right: 0.8vw;"></div>
                            -objectivetime
                        </div>  
                    </div>
                    <canvas id="ttChart" style = "margin-top: 2vw; margin-bottom: 1vw;"></canvas>
                </div>
            </div>
            <div style = "background-color: #1F1F1F; width: 100%; border: 50%; border-radius: 10px; box-shadow: 3px 3px 3px 3px rgba(0, 0, 0, 0.3); margin-top: 2vw; display: flex; flex-direction: column; align-items: center;">
                <label style="display: block;color: white; font-size: 1.3vw; width: 100%; text-align: center; font-weight: 600; margin-top: 1vw;">Buffs</label>
                <img src = "
                -buffpath
                " style="width: 80%; margin-top: 2vw; border-radius: 7px; margin-bottom: 1.3vw;">
            </div>
        </div>
        <div style="display: flex; flex-direction: column; width: 25%; margin-left: auto;">
            <div style = "background-color: #1F1F1F; width: 100%; border-radius: 10px; box-shadow: 3px 3px 3px 3px rgba(0, 0, 0, 0.3);">
                <label style="display: block;color: white; font-size: 1.3vw; width: 100%; text-align: center; font-weight: 600; margin-top: 1vw;">Session Stats</label>
                <div style="width:100%; display: flex; flex-direction: column;">
                    <label style="display: block;color: white; font-size: 1.2vw; width: 100%; font-weight: 500; margin-top: 2vw; margin-left: 10%;">
                        Session Time: <span style="color:#BB86FC;">
                            -sessiontime
                        </span>
                    </label>
                    <label style="display: block;color: white; font-size: 1.2vw; width: 100%; font-weight: 500; margin-top: 2vw; margin-left: 10%;">
                        Current Honey: <span style="color:goldenrod;">
                            -currenthoney
                        </span>
                    </label>
                    <label style="display: block;color: white; font-size: 1.2vw; width: 100%; font-weight: 500; margin-top: 2vw; margin-left: 10%;">
                        Session Honey: <span style="color:goldenrod;">
                            -sessionhoney
                        </span>
                    </label>
                    <label style="display: block;color: white; font-size: 1.2vw; width: 100%; font-weight: 500; margin-top: 2vw; margin-left: 10%;">
                        Vicious Bees Killed: <span style="color:indianred">
                            -vickills
                        </span>
                    </label>
                    <label style="display: block;color: white; font-size: 1.2vw; width: 100%; font-weight: 500; margin-top: 2vw; margin-left: 10%; margin-bottom: 1vw;">
                        Quests Completed: <span style="color:green">
                            -quests
                        </span>
                    </label>
                </div>

            </div>

            <div style = "background-color: #1F1F1F; width: 100%; border-radius: 10px; box-shadow: 3px 3px 3px 3px rgba(0, 0, 0, 0.3); margin-top: 4vw;">
                <label style="display: block;color: white; font-size: 1.3vw; width: 100%; text-align: center; font-weight: 600; margin-top: 1vw;">Hourly Stats</label>
                <div style="width:100%; display: flex; flex-direction: column;">
                    <label style="display: block;color: white; font-size: 1.2vw; width: 100%; font-weight: 500; margin-top: 2vw; margin-left: 10%;">
                        Honey This Hour: <span style="color:goldenrod;">
                            -hourlyhoney
                        </span>
                    </label>
                    <label style="display: block;color: white; font-size: 1.2vw; width: 100%; font-weight: 500; margin-top: 2vw; margin-left: 10%;">
                        Average Gather Time: 
                        <span style="color: aquamarine;">
                            -gatheravg
                        </span>
                    </label>
                    <label style="display: block;color: white; font-size: 1.2vw; width: 100%; font-weight: 500; margin-top: 2vw; margin-left: 10%;">
                        Average Convert Time:
                        <span style="color: aquamarine;">
                            -convertavg
                        </span>
                    </label>
                    <label style="display: block;color: white; font-size: 1.2vw; width: 100%; font-weight: 500; margin-top: 2vw; margin-left: 10%; margin-bottom: 1vw;">
                        Bugs Killed: <span style="color:indianred">
                            -bugkills
                        </span>
                    </label>
                </div>

            </div>
        </div>
        
    </main>
    <script>
        function leadingZero(inp){
            if (inp < 10) return `0${inp}`
            return inp
        }

        function millify(n){
            if (!n) return 0
            var millnames = ['','K','M','B','T','Qd']
            var digitCount = Math.floor(Math.log10(Math.abs(n))/3)
            var millidx = Math.max(0,Math.min(millnames.length -1, digitCount))

            return `${(n / 10**(3 * millidx)).toFixed(1)}${millnames[millidx]}`
        }
        const time = []
        const honey = []
        var hour = leadingZero(new Date().getHours())
        Chart.defaults.global.defaultFontColor = "#fff";
        Chart.defaults.global.defaultFontSize = 15
        new Chart("hmChart", {
            type: "line",
            data: {
                labels: time,
                datasets: [{
                    label: 'My First Dataset',
                    data: honey,
                    fill: false,
                    borderColor: '#BB86FC',
                    tension: 0.1
                }]
            },
            options: {
                legend: {display: false},
                elements: {
                    point:{
                        radius: 0
                    }
                },
                layout: {
                    padding: {
                        left: 20,
                        right: 20,
                        top: 0,
                        bottom: 10
                    }
                },
                scales: {
                    xAxes: [{
                        display: true,
                        gridLines: {
                            display:false
                        },

                        ticks: {
                            autoSkip: false,
                            minRotation: 0,
                            maxRotation: 0,
                            callback: function(value, index, values) {
                                if (!(value%10)) return `${hour}:${leadingZero(value)}`
                            }
                        }
                    }],
                    yAxes: [{
                        display: true,
                        gridLines: {
                            borderDash: [5, 10],
                            color: "#464645"
                        },
                        ticks: {
                            callback: function(value, index, values) {
                                return millify(value);
                            }
                        }
                    }]
                    }
            }
        });

        const tasks = ["Rejoining", "Gathering", "Bug Runs", "Converting", "Objectives"];
        const times = []
        var barColors = [
        "#693ADC",
        "#937AD2",
        "#A29EAB",
        "#65686C",
        "#505358"
        ];

        new Chart("ttChart", {
        type: "doughnut",
        data: {
            labels: tasks,
            datasets: [{
            backgroundColor: barColors,
            borderWidth: 0,
            data: times
            }]
        },
        
        options: {
            legend: {display: false},
            title: {
            display: false,
            },
            animation: {
                duration: 0
            }
        }
        });
    </script>
</body>
</html>